
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user 2-core Stata perpetual license:
       Serial number:  501506203290
         Licensed to:  Miklos Koren
                       CEU MicroData


Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do master 

. do 01_create_analysis_sample

. * relative path to data folder
. use ../open-trade-data/CERDI/CERDI-seadistance.dta, clear

. * as opposed to: /Users/koren/Documents/stata-batch/open-trade-data/CERDI/CER
> DI-seadistance.dta
. * as opposed to: cd /Users/koren/Documents/stata-batch/open-trade-data/CERDI/
. * as opposed to: global path = /Users/koren/Documents/stata-batch/open-trade-
> data/CERDI/ (this is second best)
. 
. keep if iso1=="HUN"
(51,076 observations deleted)

. 
. * all countries with missing values are coastal
. mvencode capitalport*, mv(0) override
capitalport2: 53 missing values recoded

. 
. save ../analysis_sample/distance-to-hungary.dta, replace
file ../analysis_sample/distance-to-hungary.dta saved

. * always add a new line at end
. 
end of do-file

. do 02_read_analysis_sample

. use ../analysis_sample/distance-to-hungary.dta, clear

. 
end of do-file

. do 03_calculate_distances

. * first you go to port, then ship by sea, then go from port to capital
. generate total_distance = capitalport1 + seadistance + capitalport2

. label var total_distance "Total distance between capitals (by sea, km)"

. 
. * beware: missing is greater than any number
. drop if total_distance > 2000 & !missing(total_distance)
(215 observations deleted)

. 
end of do-file

. do 04_write_countries_csv

. keep iso2

. * use expressive variable name
. rename iso2 iso_3166_country_code

. export delimited using ../output/nearby-countries.csv, replace
file ../output/nearby-countries.csv saved

. 
end of do-file

. 
end of do-file
